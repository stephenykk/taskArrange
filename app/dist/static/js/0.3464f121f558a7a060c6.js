webpackJsonp([0,8],{153:function(t,e,n){n(433);var r=n(11)(n(500),n(471),"data-v-42d1f055",null);t.exports=r.exports},378:function(t,e,n){var r=n(11)(n(499),n(484),null,null);t.exports=r.exports},380:function(t,e,n){var r=n(12),a=n(7),i=n(144),o=n(381),s=n(25).f;t.exports=function(t){var e=a.Symbol||(a.Symbol=i?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},381:function(t,e,n){e.f=n(8)},382:function(t,e,n){"use strict";(function(t,r){var a=n(388),i=n.n(a),o=n(76),s=n.n(o);e.a={props:{api:{type:String,required:!0},active:{type:Boolean,default:!0},idkey:{type:String,default:"id"},order:{type:String,default:""},subject:String,queryView:Boolean,queryCondition:Object},data:function(){return{paging:{total:0},params:t.pagingParams(),data:[]}},computed:{delApi:function(){var t=this.api.split("/");return t[t.length-1]="delete",t.join("/")}},methods:{handlePagingChange:function(e){this.params=t.pagingParams(e),this.load(!0)},load:function(e){var n=this,a=this.params;this.order&&s()(a,{order:this.order});var o=this.queryView?{view:!0}:{},l=this.queryCondition;"object"===("undefined"==typeof l?"undefined":i()(l))&&s()(o,l);var u="获取"+this.subject+"数据",c=function(t){n.data=t.data,n.paging.total=t.total};c.notips=e,r.post(t.getApi(this.api,a),o).then(t.resolvedCallback(u,c))},editRow:function(t){this.$emit("edit",t)},delRow:function(t){this.$emit("del",t),this.delConfirm(t[this.idkey])},delConfirm:function(t){var e=this;this.$confirm("确定删除"+this.subject+"?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.removeRow(t)}).catch(function(){e.$message.info("取消删除")})},removeRow:function(e){var n=this;r.get(t.getApi(this.delApi+"/"+e)).then(t.resolvedCallback("删除",function(){return n.load(!0)}))}},watch:{active:function(){this.active&&this.load()}},mounted:function(){this.active&&this.$store.state.user.userId&&this.load()}}}).call(e,n(5),n(16))},383:function(t,e,n){var r=n(149),a=n(78).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,a)}},384:function(t,e,n){"use strict";(function(t,n){e.a={props:{saveApi:String,editApi:String,idkey:{type:String,default:"id"},current:{type:Object,default:function(){return{}}}},data:function(){return{rules:{}}},computed:{id:function(){return this.current[this.idkey]},isEdit:function(){return!!this.current[this.idkey]}},methods:{save:function(){var e=this,r=t.compact(t.extend({},this.current));if(this.preSave)try{r=this.preSave(r)}catch(t){return void this.$message.error(t.message)}var a=(this.isEdit?"修改":"新增")+this.subject,i=this.isEdit?this.editApi:this.saveApi;this.isEdit&&delete r[this.idkey],n.post(t.getApi(i),r).then(t.resolvedCallback(a,function(){e.postSave(),e.$emit("save-done")}))},postSave:function(){this.hide&&"function"==typeof this.hide&&this.hide()}}}}).call(e,n(5),n(16))},385:function(t,e,n){"use strict";e.a={props:["subject"],data:function(){return{visible:!1}},methods:{show:function(){this.visible=!0},hide:function(){this.visible=!1}}}},386:function(t,e,n){t.exports={default:n(389),__esModule:!0}},387:function(t,e,n){t.exports={default:n(390),__esModule:!0}},388:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}e.__esModule=!0;var a=n(387),i=r(a),o=n(386),s=r(o),l="function"==typeof s.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":typeof t};e.default="function"==typeof s.default&&"symbol"===l(i.default)?function(t){return"undefined"==typeof t?"undefined":l(t)}:function(t){return t&&"function"==typeof s.default&&t.constructor===s.default&&t!==s.default.prototype?"symbol":"undefined"==typeof t?"undefined":l(t)}},389:function(t,e,n){n(398),n(397),n(399),n(400),t.exports=n(7).Symbol},390:function(t,e,n){n(81),n(82),t.exports=n(381).f("iterator")},391:function(t,e,n){var r=n(73),a=n(145),i=n(143);t.exports=function(t){var e=r(t),n=a.f;if(n)for(var o,s=n(t),l=i.f,u=0;s.length>u;)l.call(t,o=s[u++])&&e.push(o);return e}},392:function(t,e,n){var r=n(77);t.exports=Array.isArray||function(t){return"Array"==r(t)}},393:function(t,e,n){var r=n(73),a=n(37);t.exports=function(t,e){for(var n,i=a(t),o=r(i),s=o.length,l=0;s>l;)if(i[n=o[l++]]===e)return n}},394:function(t,e,n){var r=n(75)("meta"),a=n(42),i=n(24),o=n(25).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(40)(function(){return l(Object.preventExtensions({}))}),c=function(t){o(t,r,{value:{i:"O"+ ++s,w:{}}})},p=function(t,e){if(!a(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!i(t,r)){if(!l(t))return"F";if(!e)return"E";c(t)}return t[r].i},f=function(t,e){if(!i(t,r)){if(!l(t))return!0;if(!e)return!1;c(t)}return t[r].w},d=function(t){return u&&v.NEED&&l(t)&&!i(t,r)&&c(t),t},v=t.exports={KEY:r,NEED:!1,fastKey:p,getWeak:f,onFreeze:d}},395:function(t,e,n){var r=n(143),a=n(74),i=n(37),o=n(146),s=n(24),l=n(147),u=Object.getOwnPropertyDescriptor;e.f=n(17)?u:function(t,e){if(t=i(t),e=o(e,!0),l)try{return u(t,e)}catch(t){}if(s(t,e))return a(!r.f.call(t,e),t[e])}},396:function(t,e,n){var r=n(37),a=n(383).f,i={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return a(t)}catch(t){return o.slice()}};t.exports.f=function(t){return o&&"[object Window]"==i.call(t)?s(t):a(r(t))}},397:function(t,e){},398:function(t,e,n){"use strict";var r=n(12),a=n(24),i=n(17),o=n(41),s=n(150),l=n(394).KEY,u=n(40),c=n(80),p=n(79),f=n(75),d=n(8),v=n(381),m=n(380),y=n(393),h=n(391),b=n(392),g=n(26),_=n(37),A=n(146),x=n(74),w=n(148),S=n(396),C=n(395),k=n(25),j=n(73),M=C.f,T=k.f,E=S.f,O=r.Symbol,$=r.JSON,F=$&&$.stringify,P="prototype",B=d("_hidden"),q=d("toPrimitive"),N={}.propertyIsEnumerable,R=c("symbol-registry"),I=c("symbols"),D=c("op-symbols"),z=Object[P],J="function"==typeof O,K=r.QObject,U=!K||!K[P]||!K[P].findChild,W=i&&u(function(){return 7!=w(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=M(z,e);r&&delete z[e],T(t,e,n),r&&t!==z&&T(z,e,r)}:T,L=function(t){var e=I[t]=w(O[P]);return e._k=t,e},Y=J&&"symbol"==typeof O.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof O},V=function(t,e,n){return t===z&&V(D,e,n),g(t),e=A(e,!0),g(n),a(I,e)?(n.enumerable?(a(t,B)&&t[B][e]&&(t[B][e]=!1),n=w(n,{enumerable:x(0,!1)})):(a(t,B)||T(t,B,x(1,{})),t[B][e]=!0),W(t,e,n)):T(t,e,n)},G=function(t,e){g(t);for(var n,r=h(e=_(e)),a=0,i=r.length;i>a;)V(t,n=r[a++],e[n]);return t},Q=function(t,e){return void 0===e?w(t):G(w(t),e)},X=function(t){var e=N.call(this,t=A(t,!0));return!(this===z&&a(I,t)&&!a(D,t))&&(!(e||!a(this,t)||!a(I,t)||a(this,B)&&this[B][t])||e)},H=function(t,e){if(t=_(t),e=A(e,!0),t!==z||!a(I,e)||a(D,e)){var n=M(t,e);return!n||!a(I,e)||a(t,B)&&t[B][e]||(n.enumerable=!0),n}},Z=function(t){for(var e,n=E(_(t)),r=[],i=0;n.length>i;)a(I,e=n[i++])||e==B||e==l||r.push(e);return r},tt=function(t){for(var e,n=t===z,r=E(n?D:_(t)),i=[],o=0;r.length>o;)!a(I,e=r[o++])||n&&!a(z,e)||i.push(I[e]);return i};J||(O=function(){if(this instanceof O)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(n){this===z&&e.call(D,n),a(this,B)&&a(this[B],t)&&(this[B][t]=!1),W(this,t,x(1,n))};return i&&U&&W(z,t,{configurable:!0,set:e}),L(t)},s(O[P],"toString",function(){return this._k}),C.f=H,k.f=V,n(383).f=S.f=Z,n(143).f=X,n(145).f=tt,i&&!n(144)&&s(z,"propertyIsEnumerable",X,!0),v.f=function(t){return L(d(t))}),o(o.G+o.W+o.F*!J,{Symbol:O});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)d(et[nt++]);for(var et=j(d.store),nt=0;et.length>nt;)m(et[nt++]);o(o.S+o.F*!J,"Symbol",{for:function(t){return a(R,t+="")?R[t]:R[t]=O(t)},keyFor:function(t){if(Y(t))return y(R,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){U=!0},useSimple:function(){U=!1}}),o(o.S+o.F*!J,"Object",{create:Q,defineProperty:V,defineProperties:G,getOwnPropertyDescriptor:H,getOwnPropertyNames:Z,getOwnPropertySymbols:tt}),$&&o(o.S+o.F*(!J||u(function(){var t=O();return"[null]"!=F([t])||"{}"!=F({a:t})||"{}"!=F(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!Y(t)){for(var e,n,r=[t],a=1;arguments.length>a;)r.push(arguments[a++]);return e=r[1],"function"==typeof e&&(n=e),!n&&b(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!Y(e))return e}),r[1]=e,F.apply($,r)}}}),O[P][q]||n(18)(O[P],q,O[P].valueOf),p(O,"Symbol"),p(Math,"Math",!0),p(r.JSON,"JSON",!0)},399:function(t,e,n){n(380)("asyncIterator")},400:function(t,e,n){n(380)("observable")},401:function(t,e,n){"use strict";var r=[{label:"临时任务",value:"once"},{label:"每天任务",value:"daily"},{label:"每周任务",value:"weekly"},{label:"每月任务",value:"monthly"},{label:"每季任务",value:"quarter"},{label:"每年任务",value:"yearly"}],a={title:"任务名称",content:"任务内容",expect_start:"开始时间",expect_end:"结束时间",reciever:"负责人",frequency:"任务类型"},i={created:"已创建",assigned:"已分派",recieved:"已接收",doing:"进行中",finish:"已完成",delay:"延迟"},o=[{status:"created",text:"创建"},{status:"assigned",text:"分派"},{status:"recieved",text:"接受"},{status:"doing",text:"开始"},{status:"finish",text:"结束"},{status:"delay",text:"延迟"}],s={assigned:"assign_time",recieved:"recieve_time",doing:"task_start",finish:"task_end"},l={id:"",creator:"",status:"created",expect_start:"",expect_end:"",frequency:"daily"};e.a={taskTypes:r,requiredFields:a,statusMap:i,statusSteps:o,statusTimeFields:s,newTask:l}},408:function(t,e,n){"use strict";var r=n(401),a=r.a.statusSteps,i={assigned:"assign_time",recieved:"recieve_time",doing:"job_start",finish:"job_end"},o=[{value:"network",label:"上网问题"},{value:"print",label:"打印问题"},{value:"program",label:"程序问题"},{value:"hardware",label:"设备问题"},{value:"other",label:"其他问题"}],s={id:"",title:"",content:"",type:"network",status:"created",dep_id:"",addr:"",tel:"",creator:"",ctime:"",mtime:""},l={created:"已申请",assigned:"已分派",recieved:"已接收",doing:"处理中",finish:"已完成",delay:"延迟"},u={title:"任务名称",content:"任务内容",dep_id:"部门",type:"故障类型",addr:"所在地址",tel:"电话"};e.a={faultTypes:o,newApply:s,requiredFields:u,statusMap:l,statusSteps:a,statusTimeFields:i}},419:function(t,e,n){e=t.exports=n(373)(),e.push([t.i,".apply-table .action-td .cell{padding:0 5px}","",{version:3,sources:["/./src/views/apply/MyApplyTable.vue"],names:[],mappings:"AACA,8BACE,aAAe,CAChB",file:"MyApplyTable.vue",sourcesContent:["\n.apply-table .action-td .cell {\n  padding: 0 5px;\n}\n"],sourceRoot:"webpack://"}])},422:function(t,e,n){e=t.exports=n(373)(),e.push([t.i,"h1[data-v-42d1f055]{font-size:30px;font-weight:400}","",{version:3,sources:["/./src/views/apply/My.vue"],names:[],mappings:"AACA,oBACE,eAAgB,AAChB,eAAoB,CACrB",file:"My.vue",sourcesContent:["\nh1[data-v-42d1f055] {\n  font-size: 30px;\n  font-weight: normal;\n}\n"],sourceRoot:"webpack://"}])},423:function(t,e,n){e=t.exports=n(373)(),e.push([t.i,".apply-table .action-td .cell{padding:0 5px}","",{version:3,sources:["/./src/views/apply/ApplyTable.vue"],names:[],mappings:"AACA,8BACE,aAAe,CAChB",file:"ApplyTable.vue",sourcesContent:["\n.apply-table .action-td .cell {\n  padding: 0 5px;\n}\n"],sourceRoot:"webpack://"}])},424:function(t,e,n){e=t.exports=n(373)(),e.push([t.i,".apply-page h1{font-size:23px;font-weight:400}","",{version:3,sources:["/./src/views/apply/index.vue"],names:[],mappings:"AACA,eACE,eAAgB,AAChB,eAAoB,CACrB",file:"index.vue",sourcesContent:["\n.apply-page h1 {\n  font-size: 23px;\n  font-weight: normal;\n}\n"],sourceRoot:"webpack://"}])},428:function(t,e,n){e=t.exports=n(373)(),e.push([t.i,"h1[data-v-dc4ea88e]{font-size:35px}.apply-create-page[data-v-dc4ea88e]{width:60%;margin:auto;margin-top:50px}","",{version:3,sources:["/./src/views/apply/ApplyForm.vue"],names:[],mappings:"AACA,oBACE,cAAgB,CACjB,AACD,oCACE,UAAW,AACX,YAAa,AACb,eAAiB,CAClB",file:"ApplyForm.vue",sourcesContent:["\nh1[data-v-dc4ea88e] {\n  font-size: 35px;\n}\n.apply-create-page[data-v-dc4ea88e] {\n  width: 60%;\n  margin: auto;\n  margin-top: 50px;\n}\n"],sourceRoot:"webpack://"}])},430:function(t,e,n){var r=n(419);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(374)("3f596bf3",r,!0)},433:function(t,e,n){var r=n(422);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(374)("5c5492c1",r,!0)},434:function(t,e,n){var r=n(423);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(374)("1f630afe",r,!0)},435:function(t,e,n){var r=n(424);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(374)("b7065976",r,!0)},439:function(t,e,n){var r=n(428);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);n(374)("20d0ba94",r,!0)},445:function(t,e,n){n(439);var r=n(11)(n(496),n(486),"data-v-dc4ea88e",null);t.exports=r.exports},446:function(t,e,n){var r=n(11)(n(497),n(479),null,null);t.exports=r.exports},447:function(t,e,n){n(434);var r=n(11)(n(498),n(477),null,null);t.exports=r.exports},448:function(t,e,n){var r=n(11)(n(501),n(460),null,null);t.exports=r.exports},449:function(t,e,n){n(430);var r=n(11)(n(502),n(462),null,null);t.exports=r.exports},460:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"维修结果"},model:{value:t.visible,callback:function(e){t.visible=e}}},[n("el-form",{attrs:{model:t.current,"label-width":"120px","label-position":"right"}},[n("el-form-item",{attrs:{label:"故障: ",prop:"title"}},[n("div",[t._v(t._s(t.current.title))])]),t._v(" "),n("el-form-item",{attrs:{label:"故障描述: ",prop:"content"}},[n("div",[t._v(t._s(t.current.content))])]),t._v(" "),n("el-form-item",{attrs:{label:"维修结果",prop:"result"}},[n("el-select",{model:{value:t.current.result,callback:function(e){t.current.result=e}}},[n("el-option",{attrs:{value:"fixed",label:"已修好"}}),t._v(" "),n("el-option",{attrs:{value:"unfixed",label:"未修好"}}),t._v(" "),n("el-option",{attrs:{value:"delay",label:"延期处理"}})],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"维修备注: ",prop:"reason"}},[n("el-input",{attrs:{type:"textarea",rows:4},model:{value:t.current.reason,callback:function(e){t.current.reason=e}}})],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),t._v(" "),n("el-button",{attrs:{type:"default"},on:{click:t.hide}},[t._v("取消")])],1)],1)},staticRenderFns:[]}},462:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"apply-table"},[n("el-table",{attrs:{border:"",stripe:"",data:t.data}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"70"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"故障名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"type",label:"故障类型"},scopedSlots:t._u([["default",function(e){return[t._v("\n        "+t._s(t._f("faultTypeText")(e.row.type))+"\n      ")]}]])}),t._v(" "),n("el-table-column",{attrs:{prop:"recieverName",label:"技术员"}}),t._v(" "),n("el-table-column",{attrs:{prop:"creatorName",label:"申请人"}}),t._v(" "),n("el-table-column",{attrs:{prop:"assignerName",label:"分派人"}}),t._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([["default",function(e){return[t._v("\n        "+t._s(t._f("statusText")(e.row.status))+"\n      ")]}]])}),t._v(" "),n("el-table-column",{attrs:{prop:"assign_time",label:"分派时间",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{prop:"recieve_time",label:"接受时间",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{prop:"job_start",label:"开始时间",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{prop:"job_end",label:"结束时间",width:"120"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作","class-name":"action-td",width:"120"},scopedSlots:t._u([["default",function(e){return[n("el-button",{attrs:{type:t.hasNextStatus(e.row.status)?"primary":"success"},on:{click:function(n){t.updateApply(e.row)}}},[t._v("\n        "+t._s(t._f("nextStatusText")(e.row.status)))])]}]])})],1),t._v(" "),n("div",{staticClass:"paging mt10 clearfix"},[n("ex-pagination",{attrs:{paging:t.paging},on:{"paging-change":t.handlePagingChange}})],1)],1)},staticRenderFns:[]}},471:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"apply-page apply-admin"},[n("h1",{staticClass:"text-center"},[t._v("我的故障列表")]),t._v(" "),n("my-apply-table",{ref:"table",attrs:{api:"apply/get","query-condition":{reciever:t.user.userId},idkey:"id",subject:"申请","query-view":!0,active:t.tblActive},on:{"modal-show":t.showModal}}),t._v(" "),n("my-apply-modal",{ref:"modal",attrs:{current:t.curApply}})],1)},staticRenderFns:[]}},477:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"apply-table"},[n("el-table",{attrs:{border:"",stripe:"",data:t.data}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"70"}}),t._v(" "),n("el-table-column",{attrs:{prop:"title",label:"故障名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"type",label:"故障类型"},scopedSlots:t._u([["default",function(e){return[t._v("\n        "+t._s(t._f("faultTypeText")(e.row.type))+"\n      ")]}]])}),t._v(" "),n("el-table-column",{attrs:{prop:"recieverName",label:"技术员"}}),t._v(" "),n("el-table-column",{attrs:{prop:"creatorName",label:"申请人"}}),t._v(" "),n("el-table-column",{attrs:{prop:"assignerName",label:"分派人"}}),t._v(" "),n("el-table-column",{attrs:{prop:"status",label:"状态"},scopedSlots:t._u([["default",function(e){return[t._v("\n        "+t._s(t._f("statusText")(e.row.status))+"\n      ")]}]])}),t._v(" "),n("el-table-column",{attrs:{prop:"job_start",label:"开始时间"}}),t._v(" "),n("el-table-column",{attrs:{prop:"job_end",label:"结束时间"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作","class-name":"action-td",width:"180"},scopedSlots:t._u([["default",function(e){return[n("el-button",{attrs:{plain:"",size:"small",type:"primary"},on:{click:function(n){t.showModal(e.row)}}},[t._v("分派")]),t._v(" "),n("el-button",{attrs:{plain:"",size:"small",type:"primary"},on:{click:function(n){t.editRow(e.row)}}},[t._v("编辑")]),t._v(" "),n("el-button",{attrs:{plain:"",size:"small",type:"danger"},on:{click:function(n){t.delRow(e.row)}}},[t._v("删除")])]}]])})],1),t._v(" "),n("div",{staticClass:"paging mt10 clearfix"},[n("ex-pagination",{attrs:{paging:t.paging},on:{"paging-change":t.handlePagingChange}})],1)],1)},staticRenderFns:[]}},479:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:"分派服务"},model:{value:t.visible,callback:function(e){t.visible=e}}},[n("el-form",{attrs:{model:t.current,"label-width":"120px","label-position":"right"}},[n("el-form-item",{attrs:{label:"故障: ",prop:"title"}},[n("div",[t._v(t._s(t.current.title))])]),t._v(" "),n("el-form-item",{attrs:{label:"故障描述: ",prop:"content"}},[n("div",[t._v(t._s(t.current.content))])]),t._v(" "),n("el-form-item",{attrs:{label:"技术员: ",prop:"reciever"}},[t.onlyFree?n("ui-select",{key:"freeSel",attrs:{api:"user/getFreeIters",fields:["userId","userName"],value:t.current.reciever},on:{change:t.onSelectUser}}):n("ui-select",{key:"allSel",attrs:{api:"user/getIters",fields:["userId","userName"],value:t.current.reciever},on:{change:t.onSelectUser}}),t._v(" "),n("el-checkbox",{model:{value:t.onlyFree,callback:function(e){t.onlyFree=e}}},[t._v("仅空闲技术员")])],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")]),t._v(" "),n("el-button",{attrs:{type:"default"},on:{click:t.hide}},[t._v("取消")])],1)],1)},staticRenderFns:[]}},480:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"apply-page"},[n("h1",{staticClass:"text-center"},[t._v("故障服务申请")]),t._v(" "),n("apply-form",{attrs:{"edit-api":"apply/update/"+t.curApply.id,current:t.curApply},on:{"save-done":t.onSaved}})],1)},staticRenderFns:[]}},484:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"apply-list-page"},[n("h1",{staticClass:"text-center"},[t._v("故障申请列表")]),t._v(" "),n("apply-table",{ref:"table",attrs:{api:"apply/get",subject:"申请","query-view":!0},on:{edit:t.nav2edit,"modal-show":t.showModal}}),t._v(" "),n("apply-modal",{ref:"modal",attrs:{current:t.curApply},on:{reload:function(e){t.$refs.table.load()}}})],1)},staticRenderFns:[]}},486:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"apply-page apply-create-page"},[n("el-form",{attrs:{"label-width":"150px","label-position":"right"}},[n("el-form-item",{attrs:{required:"",label:"部门:"}},[n("ui-select",{attrs:{api:"dep/get",value:t.current.dep_id},on:{change:t.onSelectDep}})],1),t._v(" "),n("el-form-item",{attrs:{required:"",label:"故障类型:"}},[n("el-select",{attrs:{placeholder:"故障类型"},model:{value:t.current.type,callback:function(e){t.current.type=e}}},t._l(t.faultTypes,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),n("el-form-item",{attrs:{required:"",label:"故障名称:"}},[n("el-input",{model:{value:t.current.title,callback:function(e){t.current.title=e}}})],1),t._v(" "),n("el-form-item",{attrs:{required:"",label:"故障描述:"}},[n("el-input",{attrs:{type:"textarea",rows:4},model:{value:t.current.content,callback:function(e){t.current.content=e}}})],1),t._v(" "),n("el-form-item",{attrs:{required:"",label:"所在地址:"}},[n("el-input",{model:{value:t.current.addr,callback:function(e){t.current.addr=e}}})],1),t._v(" "),n("el-form-item",{attrs:{required:"",label:"联系电话:"}},[n("el-input",{model:{value:t.current.tel,callback:function(e){t.current.tel=e}}})],1),t._v(" "),n("el-form-item",{attrs:{required:""}},[n("div",{staticClass:"action"},[n("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v(t._s(t.isEdit?"保存":"创建"))])],1)])],1)],1)},staticRenderFns:[]}},496:function(t,e,n){"use strict";(function(t,r){Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),i=n.n(a),o=n(38),s=n(384),l=n(408),u=l.a.faultTypes,c=l.a.requiredFields;e.default={name:"ApplyForm",mixins:[s.a],props:{subject:{type:String,default:function(){return"申请"}},saveApi:{type:String,default:"apply/insert"},editApi:{type:String,default:"apply/update"},current:{type:[Object,null],default:function(){return{}}}},data:function(){return{faultTypes:u}},computed:i()({},n.i(o.b)(["user"])),methods:{onSelectDep:function(e){var n=this;e&&(this.current.dep_id=e,t.post(r.getApi("dep/get"),{id:e}).then(r.resolvedCallback("获取部门",function(t){var e=t.data[0];n.current.addr=e.addr,n.current.tel=e.tel})))},preSave:function(t){return r.eachKey(c,function(e,n){if(!t[n])throw new Error(e+"不能为空..")}),this.isEdit||(t.creator=this.user.userId,t.ctime=r.formatDatetime()),t.mtime=r.formatDatetime(),t},postSave:function(){r.log("save ok..")}},created:function(){this.user.userId&&(this.current.creator=this.user.userId)}}}).call(e,n(16),n(5))},497:function(t,e,n){"use strict";(function(t,r){Object.defineProperty(e,"__esModule",{value:!0});var a=n(39),i=n.n(a),o=n(385),s=n(38);e.default={name:"ApplyAssignModal",mixins:[o.a],props:{conf:null,current:{type:Object,default:function(){return{}}}},data:function(){return{onlyFree:!0}},computed:i()({},n.i(s.b)(["user"])),methods:{onSelectUser:function(t){this.current.reciever=t},save:function(){var e=this,n=this.current,a=n.reciever;if(!a)return void this.$message.warning("技术员不能为空..");if(!n.id)return void this.$message.warning("缺少必要参数 id");var i=this.user.userId,o=t.formatDatetime(),s={reciever:a,assigner:i,assign_time:o,status:"assigned"};r.post(t.getApi("apply/update/"+n.id),s).then(t.resolvedCallback("分派",function(){e.hide(),e.$emit("reload")}))}}}}).call(e,n(5),n(16))},498:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(382),a=n(408),i=a.a.statusMap,o=a.a.faultTypes;e.default={name:"ApplyTable",mixins:[r.a],methods:{showModal:function(t){this.$emit("modal-show",t)}},filters:{statusText:function(t){return i[t]},faultTypeText:function(t){var e=o.filter(function(e){return e.value===t})[0];return e?e.label:""}}}},499:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(447),a=n.n(r),i=n(446),o=n.n(i);e.default={name:"ApplyListPage",data:function(){return{curApply:{title:"",content:"",reciever:""}}},methods:{showModal:function(t){this.curApply=t,this.$refs.modal.show()},nav2edit:function(t){this.$router.push({name:"applyEdit",params:{id:t.id}})}},components:{ApplyTable:a.a,ApplyModal:o.a}}},500:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(39),a=n.n(r),i=n(38),o=n(449),s=n.n(o),l=n(448),u=n.n(l);e.default={name:"MyApplyPage",data:function(){return{tblActive:!1,curApply:{}}},computed:a()({},n.i(i.b)(["user"])),components:{MyApplyTable:s.a,MyApplyModal:u.a},methods:{showModal:function(t){this.curApply=t,this.$refs.modal.show()}},created:function(){t.checkLogin(this),this.user.userId&&(this.tblActive=!0)}}}).call(e,n(5))},501:function(t,e,n){"use strict";(function(t,r){Object.defineProperty(e,"__esModule",{value:!0});var a=n(385);e.default={name:"ApplyMenoModal",mixins:[a.a],props:{conf:null,current:{type:Object,default:function(){return{}}}},methods:{save:function(){var e=this,n=this.current,a=n.reason.trim(),i=n.result;return i?a?n.id?void t.post(r.getApi("/apply/update/"+n.id),{result:i,reason:a}).then(r.resolvedCallback("备注",function(){e.hide()})):void this.$message.warning("缺少必要参数 id"):void this.$message.warning("备注不能为空.."):void this.$message.warning("维修结果不能为空..")}}}}).call(e,n(16),n(5))},502:function(t,e,n){"use strict";(function(t,r){Object.defineProperty(e,"__esModule",{value:!0});var a=n(152),i=n.n(a),o=n(382),s=n(408),l=s.a.statusMap,u=s.a.faultTypes,c=s.a.statusSteps,p=s.a.statusTimeFields;e.default={name:"MyApplyTable",mixins:[o.a],methods:{hasNextStatus:function(e){return t.nextStatus(e,c)},showModal:function(t){this.$emit("modal-show",t)},updateApply:function(t){this.hasNextStatus(t.status)?this.setStatus(t):this.$emit("modal-show",t)},setStatus:function(e){var n=this,a=e.id,o=e.status,s=t.nextStatus(o,c);if(!s)return void this.$message.warning("已完成的维修申请..");var l=p[s.status];r.post(t.getApi("/apply/update/"+a),i()({status:s.status},l,t.formatDatetime())).then(t.resolvedCallback(s.text+"维修服务",function(){n.load(!0)}))}},filters:{statusText:function(t){return l[t]},faultTypeText:function(t){var e=u.filter(function(e){return e.value===t})[0];return e?e.label:""},nextStatusText:function(e){var n=t.nextStatus(e,c);return n?n.text:"备注"}}}}).call(e,n(5),n(16))},503:function(t,e,n){"use strict";(function(t,r){Object.defineProperty(e,"__esModule",{value:!0});var a=n(76),i=n.n(a),o=n(445),s=n.n(o),l=n(408),u=l.a.newApply;e.default={name:"ApplyPage",data:function(){return{curApply:i()({},u)}},methods:{onSaved:function(){this.curApply.id||(this.curApply=i()({},u))},getApply:function(){var e=this,n=this.$route,a=n.name,i=n.params;"applyEdit"===a&&i.id&&t.post(r.getApi("apply/get"),{id:i.id}).then(r.resolvedCallback("获取申请",function(t){e.curApply=t.data[0]}))}},components:{ApplyForm:s.a},watch:{$route:"getApply"},created:function(){r.checkLogin(this),this.getApply()}}}).call(e,n(16),n(5))},83:function(t,e,n){n(435);var r=n(11)(n(503),n(480),null,null);t.exports=r.exports}});
//# sourceMappingURL=0.3464f121f558a7a060c6.js.map