webpackJsonp([4,8],{160:function(e,t,r){var a=r(11)(r(498),r(460),null,null);e.exports=a.exports},382:function(e,t,r){"use strict";(function(e,r){t.a={props:{saveApi:String,editApi:String,idkey:{type:String,default:"id"},current:{type:Object,default:function(){return{}}}},data:function(){return{rules:{}}},computed:{id:function(){return this.current[this.idkey]},isEdit:function(){return!!this.current[this.idkey]}},methods:{save:function(){var t=this,a=e.compact(e.extend({},this.current));if(this.preSave)try{a=this.preSave(a)}catch(e){return void this.$message.error(e.message)}var n=(this.isEdit?"修改":"新增")+this.subject,i=this.isEdit?this.editApi:this.saveApi;this.isEdit&&delete a[this.idkey],r.post(e.getApi(i),a).then(e.resolvedCallback(n,function(){t.postSave(),t.$emit("save-done")}))},postSave:function(){this.hide&&"function"==typeof this.hide&&this.hide()}}}}).call(t,r(6),r(16))},400:function(e,t,r){t=e.exports=r(373)(),t.push([e.i,".avatar-uploader{position:relative;width:120px;height:120px;display:inline-block;border:1px dashed #d9d9d9;border-radius:6px;overflow:hidden}.avatar-uploader:hover{border-color:#20a2ff}.avatar-uploader .avatar-plus-icon{position:absolute;top:0;left:0;font-size:20px;line-height:120px;width:100%;height:100%;text-align:center}.avatar-uploader .avatar{width:120px;height:120px}","",{version:3,sources:["/./src/views/admin/users/UserForm.vue"],names:[],mappings:"AACA,iBACE,kBAAmB,AACnB,YAAa,AACb,aAAc,AACd,qBAAsB,AACtB,0BAA2B,AAC3B,kBAAmB,AACnB,eAAiB,CAClB,AACD,uBACI,oBAAsB,CACzB,AACD,mCACI,kBAAmB,AACnB,MAAO,AACP,OAAQ,AACR,eAAgB,AAChB,kBAAmB,AACnB,WAAY,AACZ,YAAa,AACb,iBAAmB,CACtB,AACD,yBACI,YAAa,AACb,YAAc,CACjB",file:"UserForm.vue",sourcesContent:["\n.avatar-uploader {\n  position: relative;\n  width: 120px;\n  height: 120px;\n  display: inline-block;\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  overflow: hidden;\n}\n.avatar-uploader:hover {\n    border-color: #20a2ff;\n}\n.avatar-uploader .avatar-plus-icon {\n    position: absolute;\n    top: 0;\n    left: 0;\n    font-size: 20px;\n    line-height: 120px;\n    width: 100%;\n    height: 100%;\n    text-align: center;\n}\n.avatar-uploader .avatar {\n    width: 120px;\n    height: 120px;\n}\n"],sourceRoot:"webpack://"}])},401:function(e,t,r){var a=r(400);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r(374)("15ef0847",a,!0)},402:function(e,t,r){r(401);var a=r(11)(r(405),r(403),null,null);e.exports=a.exports},403:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{attrs:{rules:e.rules,model:e.current,"label-width":"120px","label-position":"right"}},[r("el-form-item",{attrs:{label:"用户名: ",prop:"name"}},[r("el-input",{attrs:{minlength:3,maxlength:20},model:{value:e.current.name,callback:function(t){e.current.name=t}}})],1),e._v(" "),r("el-form-item",{attrs:{label:"昵称: ",prop:"nick_name"}},[r("el-input",{attrs:{minlength:3,maxlength:20},model:{value:e.current.nick_name,callback:function(t){e.current.nick_name=t}}})],1),e._v(" "),r("el-form-item",{attrs:{label:"密码: ",prop:"pwd"}},[r("el-input",{attrs:{type:"text",minlength:3,maxlength:20},model:{value:e.current.pwd,callback:function(t){e.current.pwd=t}}})],1),e._v(" "),r("el-form-item",{attrs:{label:"性别: ",prop:"sex"}},[r("el-select",{attrs:{placeholder:"请选择",clearable:""},model:{value:e.current.sex,callback:function(t){e.current.sex=t}}},e._l([{label:"男",value:"male"},{label:"女",value:"female"}],function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"办公电话: ",prop:"tel"}},[r("el-input",{model:{value:e.current.tel,callback:function(t){e.current.tel=t}}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机: ",prop:"mobile"}},[r("el-input",{attrs:{maxlength:13},model:{value:e.current.mobile,callback:function(t){e.current.mobile=t}}})],1),e._v(" "),r("el-form-item",{attrs:{label:"头像: ",prop:"avatar"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadApi,"show-file-list":!1,"on-success":e.onUploaded,"before-upload":e.checkUploadFile}},[e.avatarUrl(e.current.avatar)?r("img",{staticClass:"avatar",attrs:{src:e.avatarUrl(e.current.avatar)}}):r("i",{staticClass:"el-icon-plus avatar-plus-icon"})])],1),e._v(" "),r("el-form-item",{attrs:{label:"职称: ",prop:"position"}},[r("el-input",{model:{value:e.current.position,callback:function(t){e.current.position=t}}})],1),e._v(" "),r("el-form-item",{attrs:{label:"部门: ",prop:"dep_id"}},[r("ui-select",{attrs:{api:"dep/get",value:e.current.dep_id},on:{change:e.onSelectDep}})],1),e._v(" "),r("el-form-item",{attrs:{label:"角色: ",prop:"role_id"}},[r("ui-select",{attrs:{disabled:e.isUserCenter,api:"role/get",value:e.current.role_id,fields:["id","cname"]},on:{change:e.onSelectRole}})],1)],1)},staticRenderFns:[]}},405:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var a=r(382);t.default={name:"UserForm",mixins:[a.a],props:["conf","isUserCenter"],data:function(){return{uploadApi:e.getApi("/upload/image"),subject:"用户"}},methods:{hide:function(){this.$emit("hide-modal")},checkUploadFile:function(e){var t=e.type.match(/image\/\w+/),r=e.size/1048576<2;return t||this.$message.error("请选择图片.."),r||this.$message.error("请上传小于2M的图片"),t&&r},avatarUrl:e.getAvatarUrl,onUploaded:function(e){e.ok?this.$set(this.current,"avatar",e.data.url):this.$message.error(e.data.error)},onSelectDep:function(e){this.current.dep_id=e},onSelectRole:function(e){this.current.role_id=e}}}}).call(t,r(6))},460:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user-page"},[r("h1",{staticClass:"text-center mb20"},[e._v("我的信息")]),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12,offset:6}},[r("user-form",{ref:"form",attrs:{current:e.current,"is-user-center":!0,"edit-api":"user/update/"+e.current.id},on:{"save-done":function(t){e.$emit("save-done")}}})],1)],1),e._v(" "),r("div",{staticClass:"actions text-center mb30"},[r("el-button",{attrs:{type:"primary",size:"large"},on:{click:e.save}},[e._v("保 存")])],1)],1)},staticRenderFns:[]}},498:function(e,t,r){"use strict";(function(e,a){Object.defineProperty(t,"__esModule",{value:!0});var n=r(39),i=r.n(n),l=r(402),o=r.n(l),s=r(38);t.default={name:"UserPage",components:{UserForm:o.a},data:function(){return{current:{id:"",sex:""}}},computed:i()({},r.i(s.b)(["user"])),methods:{save:function(){this.$refs.form.save()}},created:function(){var t=this;e.checkLogin(this),this.user.userId&&a.post(e.getApi("user/get"),{id:this.user.userId}).then(e.resolvedCallback("",function(e){e.data.length&&(t.current=e.data[0])}))}}}).call(t,r(6),r(16))}});
//# sourceMappingURL=4.87d4a16f2ccb5891daa9.js.map